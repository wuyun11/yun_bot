### 一、脚本与方法/对象清单

#### 1. `agent_tools.py`
- `def rag_summarize`
- `def get_weather`
- `def get_user_location`
- `def get_user_id`
- `def get_current_month`
- `def generate_external_data`

#### 2. `middleware.py`
- `def monitor_tool`
- `def log_before_model`
- `def report_prompt_switch`

#### 3. `react_agent.py`（`class ReactAgent`）
- `self.agent = create_agent(...)`
- `def execute_stream`

#### 4. `rag_service.py`（`class RagSummarizeService`）
- 成员对象：
  - `self.vector_store`
  - `self.prompt_template`
  - `self.retriever`
  - `self.prompt_text`
  - `self.model`
  - `self.chain`
- 方法：
  - `def rag_summarize`
  - `def _init_chain`
  - `def retrieve_docs`
  - `def _load_prompt_text`

#### 5. `vector_store.py`（`class VectorStoreService`）
- 成员对象：
  - `self.vector_store`
  - `self.splitter`
- 方法：
  - `def load_document`
  - `def get_retriever`

#### 6. `factory.py`
- `chat_model`
- `embed_model`

#### 7. `utils` 工具脚本
- `config_handler.py`：配置文件处理
- `path_tool.py`：路径工具
- `file_handler.py`：文件处理工具
- `prompt_loader.py`：提示词加载工具
- `logger_handler.py`：日志工具

#### 8. `app.py`
- 作为 Streamlit 网页入口，接收 `ReactAgent.execute_stream` 的输出

---

### 二、方法/对象的指向关系

1. **工具层 → Agent 核心**
   - `agent_tools.py` 所有方法（`rag_summarize`/`get_weather` 等） → `react_agent.py` 的 `self.agent = create_agent(...)`
   - `middleware.py` 所有方法（`monitor_tool`/`log_before_model`/`report_prompt_switch`） → `react_agent.py` 的 `self.agent = create_agent(...)`

2. **Agent 核心 → 应用层**
   - `react_agent.py` 的 `execute_stream` → `app.py`（Streamlit 网页）

3. **factory.py → 模型注入**
   - `factory.py` 的 `chat_model` → `react_agent.py` 的 `self.agent = create_agent(...)`
   - `factory.py` 的 `embed_model` → `rag_service.py` 的 `self.model`

4. **RAG 服务 → 工具暴露**
   - `rag_service.py` 的 `rag_summarize` → `agent_tools.py` 的 `rag_summarize`

5. **向量存储 → RAG 服务**
   - `vector_store.py` → `rag_service.py` 的 `self.vector_store`

6. **工具脚本 → 全链路支持**
   - `utils` 下所有脚本（`config_handler`/`path_tool`/`file_handler`/`prompt_loader`/`logger_handler`） → 为 `agent_tools`/`middleware`/`rag_service`/`vector_store` 等模块提供底层工具支持